doctype html
html(lang="en")
  head
    meta(charset='UTF-8')
    title Yatzy Lobby
    link(rel='stylesheet', href='/styles.css')
  body
    h1 Yatzy Lobby
    if !gameStarted
      // Add action and method to the join form so submissions are sent to /api/join
      form#joinForm(action='/api/join', method='post')
        input(type='text', name='name', placeholder='Dit navn', required)
        button(type='submit') Tilmeld dig
      button#startButton(onclick='fetch("/api/start",{method:"POST"}).then(()=>location.reload())') Start spil
    else
      p Spillet er i gang. Vent på din tur.
    h2 Spillere
    ul#playerList
      each p in players
        li #{p.name} – Point: #{p.total}, Slag: #{p.progress}

    script.
      // Opdater spillerlisten hvert par sekunder
      setInterval(async () => {
        const data = await fetch('/api/players').then(r=>r.json());
        const ul = document.getElementById('playerList');
        ul.innerHTML = '';
        data.forEach(p => {
          const li = document.createElement('li');
          li.textContent = `${p.name} – Point: ${p.total}, Slag: ${p.progress}`;
          ul.appendChild(li);
        });
      }, 2000);